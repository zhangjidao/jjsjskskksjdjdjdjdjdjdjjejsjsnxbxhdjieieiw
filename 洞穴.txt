local oldtick = tick()
local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/zhangjidao/zhangjidao/main/kmui.lua"))()
local Window = OrionLib:MakeWindow({Name = "s精炼", HidePremium = false, SaveConfig = false, IntroText = "注入器："..identifyexecutor(), ConfigFolder = "s精炼厂洞穴"})
function GetPlot()
for i,v in pairs(game:GetService("Workspace").Plots:GetChildren()) do
if v:FindFirstChild("Owner") and v.Owner.Value == game.Players.LocalPlayer then
return v
end
end
end
function MoveMinedOres(V3x,V3y,V3z)
for i,v in pairs(game:GetService("Workspace").Grabable:GetChildren()) do
if v.Name == "MaterialPart" and v:FindFirstChild("Owner") and v.Owner.Value == game.Players.LocalPlayer and (v.PrimaryPart.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).Magnitude <= 30 then
v.PrimaryPart.CFrame = CFrame.new(V3x,V3y,V3z)
game:GetService("ReplicatedStorage").Events.Grab:InvokeServer(v.Part,{})
game:GetService("ReplicatedStorage").Events.Ungrab:FireServer(v.Part,{})
task.wait(.1)
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.PrimaryPart.CFrame + Vector3.new(0,5,0)
elseif v.Name == "MaterialPart" and v:FindFirstChild("Owner") and v.Owner.Value == game.Players.LocalPlayer and (v.PrimaryPart.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).Magnitude > 30 then
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.PrimaryPart.CFrame + Vector3.new(0,5,0)
v.PrimaryPart.CFrame = CFrame.new(V3x,V3y,V3z)
game:GetService("ReplicatedStorage").Events.Grab:InvokeServer(v.Part,{})
game:GetService("ReplicatedStorage").Events.Ungrab:FireServer(v.Part,{})
task.wait(.1)
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v.PrimaryPart.CFrame + Vector3.new(0,5,0)
end
end
end

local Tab = Window:MakeTab({
Name = "主要",   
Icon = "rbxassetid://7734068321",
PremiumOnly = false
})
local Tab3 = Window:MakeTab({
Name = "传送",
Icon = "rbxassetid://7734068321",
PremiumOnly = false
})
local Tab2 = Window:MakeTab({
Name = "自动购买",
Icon = "rbxassetid://7734068321",
PremiumOnly = false
})
local Tab4 = Window:MakeTab({
Name = "",
Icon = "rbxassetid://7734068321",
PremiumOnly = false
})

local Section = Tab:AddSection({
Name = "传送矿石"
})
Tab:AddButton({
Name = "传送矿石回家",
Callback = function()
      MoveMinedOres(GetPlot().Base.Position.X,GetPlot().Base.Position.Y + 10,GetPlot().Base.Position.Z)
  end    
})
Tab:AddButton({
Name = "传送矿石进熔炉",
Callback = function()
      MoveMinedOres(GetPlot().Objects["Conveyor Funnel"].PrimaryPart.Position.X,GetPlot().Objects["Conveyor Funnel"].PrimaryPart.Position.Y+3,GetPlot().Objects["Conveyor Funnel"].PrimaryPart.Position.Z)
  end    
})
Tab:AddButton({
Name = "带来矿石",
Callback = function()
      MoveMinedOres(game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame.X,game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame.Y + 15,game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame.Z)
  end    
})
Tab:AddButton({
Name = "卖矿石",
Callback = function()
      MoveMinedOres(game:GetService("Workspace").Map.Sellary.Counter.Base.CFrame.X,game:GetService("Workspace").Map.Sellary.Counter.Base.CFrame.Y+10,game:GetService("Workspace").Map.Sellary.Counter.Base.CFrame.Z)
game.workspace.Map.Sellary.Keeper.IPart.Interact:FireServer()
  end    
})
Tab:AddButton({
Name = "回家",
Callback = function()
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = GetPlot().Base.CFrame + Vector3.new(0,10,0)
  end    
})
local Section = Tab3:AddSection({
Name = "商店"
})
for i,v in pairs(game:GetService("Workspace").Map.Buildings:GetChildren()) do
if v:FindFirstChild("Exits") then
Tab3:AddButton({
Name = v.Name,
Callback = function()
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v:FindFirstChild("Exits").Part.CFrame
end
})
elseif v:FindFirstChild("Floor") then
Tab3:AddButton({
Name = v.Name,
Callback = function()
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = v:FindFirstChild("Floor").Part.CFrame + Vector3.new(0,5,0)
end
})
end
end
local Section = Tab2:AddSection({
Name = "ucs商店"
})
Utility = {}
for i,v in pairs(game:GetService("Workspace").Map.Buildings.UCS.Products:GetChildren()) do
if not table.find(Utility, v.Name) then
table.insert(Utility,v.Name)
end
end
Tab2:AddDropdown({
Name = "买物品",
Options = Utility,
Callback = function(Value)
local obj = game:GetService("Workspace").Grabable:FindFirstChild(Value)
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = obj.PrimaryPart.CFrame
task.wait(.1)
game:GetService("ReplicatedStorage").Events.Grab:InvokeServer(obj.PrimaryPart,{})
game:GetService("ReplicatedStorage").Events.Ungrab:FireServer(obj.PrimaryPart,{})
obj.PrimaryPart.CFrame = game:GetService("Workspace").Map.Buildings.UCS.Registers.Register1.Counter.Counter.CFrame + Vector3.new(0,2,0)
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = game:GetService("Workspace").Map.Buildings.UCS.Registers.Register1.Counter.Counter.CFrame + Vector3.new(3,2,0)
game:GetService("ReplicatedStorage").Events.Grab:InvokeServer(obj.PrimaryPart,{})
game:GetService("ReplicatedStorage").Events.Ungrab:FireServer(obj.PrimaryPart,{})
task.wait(.3)
workspace.Map.Buildings.UCS.Registers.Register1.Worker.IPart.Interact:FireServer()
repeat task.wait() until game:GetService("Players").LocalPlayer.PlayerGui.UserGui.Dialog:FindFirstChild("Yes")
firesignal(game:GetService("Players").LocalPlayer.PlayerGui.UserGui.Dialog.Yes.MouseButton1Click)
obj.PrimaryPart.CFrame = GetPlot().Base.CFrame + Vector3.new(0,10,0)
end    
})
local Section = Tab2:AddSection({
Name = "汽车商店"
})
Dealer = {}
for i,v in pairs(game:GetService("Workspace").Map.Buildings.Delearship.Products:GetChildren()) do
if not table.find(Dealer, v.Name) then
table.insert(Dealer,v.Name)
end
end
Tab2:AddDropdown({
Name = "买物品",
Options = Dealer,
Callback = function(Value)
local obj = game:GetService("Workspace").Grabable:FindFirstChild(Value)
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = obj.PrimaryPart.CFrame
task.wait(.1)
game:GetService("ReplicatedStorage").Events.Grab:InvokeServer(obj.PrimaryPart,{})
game:GetService("ReplicatedStorage").Events.Ungrab:FireServer(obj.PrimaryPart,{})
obj.PrimaryPart.CFrame = game:GetService("Workspace").Map.Buildings.Delearship.Registers.Register1.Counter.Counter.CFrame + Vector3.new(0,2,0)
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = game:GetService("Workspace").Map.Buildings.Delearship.Registers.Register1.Counter.Counter.CFrame + Vector3.new(3,2,0)
game:GetService("ReplicatedStorage").Events.Grab:InvokeServer(obj.PrimaryPart,{})
game:GetService("ReplicatedStorage").Events.Ungrab:FireServer(obj.PrimaryPart,{})
task.wait(.3)
workspace.Map.Buildings.Delearship.Registers.Register1.Worker.IPart.Interact:FireServer()
repeat task.wait() until game:GetService("Players").LocalPlayer.PlayerGui.UserGui.Dialog:FindFirstChild("Yes")
firesignal(game:GetService("Players").LocalPlayer.PlayerGui.UserGui.Dialog.Yes.MouseButton1Click)
obj.PrimaryPart.CFrame = GetPlot().Base.CFrame + Vector3.new(0,10,0)
end    
})
local Section = Tab2:AddSection({
Name = "逻辑商店"
})
logic = {}
for i,v in pairs(game:GetService("Workspace").Map.Buildings.LogicShop.Products:GetChildren()) do
if not table.find(logic, v.Name) then
table.insert(logic,v.Name)
end
end
Tab2:AddDropdown({
Name = "买物品",
Options = logic,
Callback = function(Value)
local obj = game:GetService("Workspace").Grabable:FindFirstChild(Value)
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = obj.PrimaryPart.CFrame
task.wait(.1)
game:GetService("ReplicatedStorage").Events.Grab:InvokeServer(obj.PrimaryPart,{})
game:GetService("ReplicatedStorage").Events.Ungrab:FireServer(obj.PrimaryPart,{})
obj.PrimaryPart.CFrame = game:GetService("Workspace").Map.Buildings.LogicShop.Registers.Register1.Counter.Counter.CFrame + Vector3.new(0,2,0)
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = game:GetService("Workspace").Map.Buildings.LogicShop.Registers.Register1.Counter.Counter.CFrame + Vector3.new(3,2,0)
game:GetService("ReplicatedStorage").Events.Grab:InvokeServer(obj.PrimaryPart,{})
game:GetService("ReplicatedStorage").Events.Ungrab:FireServer(obj.PrimaryPart,{})
task.wait(.3)
workspace.Map.Buildings.LogicShop.Registers.Register1.Worker.IPart.Interact:FireServer()
repeat task.wait() until game:GetService("Players").LocalPlayer.PlayerGui.UserGui.Dialog:FindFirstChild("Yes")
firesignal(game:GetService("Players").LocalPlayer.PlayerGui.UserGui.Dialog.Yes.MouseButton1Click)
obj.PrimaryPart.CFrame = GetPlot().Base.CFrame + Vector3.new(0,10,0)
end    
})
local Section = Tab2:AddSection({
Name = "镐子商店"
})
pick = {}
for i,v in pairs(game:GetService("Workspace").Map.Buildings.PickaxeShop.Products:GetChildren()) do
if not table.find(pick, v.Name) then
table.insert(pick,v.Name)
end
end
Tab2:AddDropdown({
Name = "买物品",
Options = pick,
Callback = function(Value)
local obj = game:GetService("Workspace").Grabable:FindFirstChild(Value)
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = obj.PrimaryPart.CFrame
task.wait(.1)
game:GetService("ReplicatedStorage").Events.Grab:InvokeServer(obj.PrimaryPart,{})
game:GetService("ReplicatedStorage").Events.Ungrab:FireServer(obj.PrimaryPart,{})
obj.PrimaryPart.CFrame = game:GetService("Workspace").Map.Buildings.PickaxeShop.Registers.Register1.Counter.Counter.CFrame + Vector3.new(0,2,0)
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = game:GetService("Workspace").Map.Buildings.PickaxeShop.Registers.Register1.Counter.Counter.CFrame + Vector3.new(3,2,0)
game:GetService("ReplicatedStorage").Events.Grab:InvokeServer(obj.PrimaryPart,{})
game:GetService("ReplicatedStorage").Events.Ungrab:FireServer(obj.PrimaryPart,{})
task.wait(.3)
workspace.Map.Buildings.PickaxeShop.Registers.Register1.Worker.IPart.Interact:FireServer()
repeat task.wait() until game:GetService("Players").LocalPlayer.PlayerGui.UserGui.Dialog:FindFirstChild("Yes")
firesignal(game:GetService("Players").LocalPlayer.PlayerGui.UserGui.Dialog.Yes.MouseButton1Click)
obj.PrimaryPart.CFrame = GetPlot().Base.CFrame + Vector3.new(0,10,0)
end    
})
local Section = Tab2:AddSection({
Name = "家具店"
})
furn = {}
for i,v in pairs(game:GetService("Workspace").Map.Buildings.FurnitureShop.Products:GetChildren()) do
if not table.find(furn, v.Name) then
table.insert(furn,v.Name)
end
end
Tab2:AddDropdown({
Name = "买物品",
Options = furn,
Callback = function(Value)
local obj = game:GetService("Workspace").Grabable:FindFirstChild(Value)
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = obj.PrimaryPart.CFrame
task.wait(.1)
game:GetService("ReplicatedStorage").Events.Grab:InvokeServer(obj.PrimaryPart,{})
game:GetService("ReplicatedStorage").Events.Ungrab:FireServer(obj.PrimaryPart,{})
obj.PrimaryPart.CFrame = game:GetService("Workspace").Map.Buildings.FurnitureShop.Registers.Register1.Counter.Counter.CFrame + Vector3.new(0,2,0)
game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = game:GetService("Workspace").Map.Buildings.FurnitureShop.Registers.Register1.Counter.Counter.CFrame + Vector3.new(3,2,0)
game:GetService("ReplicatedStorage").Events.Grab:InvokeServer(obj.PrimaryPart,{})
game:GetService("ReplicatedStorage").Events.Ungrab:FireServer(obj.PrimaryPart,{})
task.wait(.3)
workspace.Map.Buildings.FurnitureShop.Registers.Register1.Worker.IPart.Interact:FireServer()
repeat task.wait() until game:GetService("Players").LocalPlayer.PlayerGui.UserGui.Dialog:FindFirstChild("Yes")
firesignal(game:GetService("Players").LocalPlayer.PlayerGui.UserGui.Dialog.Yes.MouseButton1Click)
obj.PrimaryPart.CFrame = GetPlot().Base.CFrame + Vector3.new(0,10,0)
end    
})

OrionLib:MakeNotification({
Name = "Loadedl!",
Content = "Loaded in: "..tostring(math.floor((tick() - oldtick)).."s"),
Image = "rbxassetid://4483345998",
Time = 3
})